{"ast":null,"code":"var _a;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { UserService } from '../../services/user.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { Router, RouterModule } from '@angular/router';\nlet LoginComponent = class LoginComponent {\n  constructor(userService, toastr, router, formBuilder) {\n    this.userService = userService;\n    this.toastr = toastr;\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.title = 'Login Page';\n    this.isData = false;\n    this.onSubmit = () => {\n      try {\n        this.email = this.loginForm.get('email').value;\n        this.password = this.loginForm.get('password').value;\n        this.profile = this.loginForm.get('profile').value;\n        //consulta de usuario por email\n        this.userService.getUserByEmail(this.email).toPromise().then(res => {\n          this.userArray = res;\n          if (this.userArray.length > 1) {\n            if (this.userArray[0].profile.profileId == this.profile && this.userArray[0].password === this.password) {\n              this.toastr.success('Your login was successfully', 'login Messages: ');\n              this.showName = this.userArray[0].name;\n              this.userIdToSession = this.userArray[0].userId;\n              this.isData = true;\n            } else if (this.userArray[1].profile.profileId == this.profile && this.userArray[1].password === this.password) {\n              this.toastr.success('Your login was successfully', 'login Messages: ');\n              this.showName = this.userArray[1].name;\n              this.userIdToSession = this.userArray[1].userId;\n              this.isData = true;\n            } else {\n              this.toastr.error('Please, confirm your data', 'login Messages: ');\n            }\n            //return;\n          } else if (this.userArray[0].profile.profileId == this.profile && this.userArray[0].password === this.password) {\n            this.toastr.success('Your login was successfully', 'login Messages: ');\n            this.showName = this.userArray[0].name;\n            this.userIdToSession = this.userArray[0].userId;\n            this.isData = true;\n          } else {\n            this.toastr.error('Please, confirm your data', 'login Messages: ');\n          }\n          if (this.isData) {\n            if (this.profile == 1) {\n              localStorage.setItem(\"UserSession\", this.userIdToSession);\n              this.router.navigate(['/profile/client'], {\n                queryParams: {\n                  name: this.showName\n                }\n              });\n            } else {\n              localStorage.setItem(\"UserSession\", this.userIdToSession);\n              this.router.navigate(['/profile/professional'], {\n                queryParams: {\n                  name: this.showName\n                }\n              });\n            }\n          }\n        });\n      } catch (error) {\n        console.log(\"API fails\");\n        alert(error);\n      }\n    };\n    this.loginForm = this.formBuilder.group({\n      email: ['', Validators.required],\n      password: ['', Validators.required],\n      profile: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    if (localStorage.getItem(\"UserSession\")) {\n      localStorage.clear();\n    }\n  }\n};\nLoginComponent = __decorate([Component({\n  standalone: true,\n  imports: [RouterModule],\n  selector: 'login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.less']\n}), __metadata(\"design:paramtypes\", [UserService, ToastrService, Router, typeof (_a = typeof FormBuilder !== \"undefined\" && FormBuilder) === \"function\" ? _a : Object])], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
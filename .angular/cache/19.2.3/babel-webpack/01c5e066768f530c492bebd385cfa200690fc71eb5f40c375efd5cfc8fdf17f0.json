{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { UserService } from '../../services/user.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { AdressService } from 'src/app/services/adress.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/services/adress.service\";\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(userService, toastr, adressService) {\n      this.userService = userService;\n      this.toastr = toastr;\n      this.adressService = adressService;\n      this.title = \"Register Page\";\n      this.registerForm = new FormGroup({\n        name: new FormControl(''),\n        lastName: new FormControl(''),\n        phone: new FormControl('', Validators.maxLength(10)),\n        email: new FormControl('', Validators.email),\n        userName: new FormControl(''),\n        password: new FormControl(''),\n        profile: new FormControl(),\n        adress: new FormControl('')\n      });\n    }\n    onSubmit() {\n      this.userService.getUserByEmail(this.registerForm.get('email').value).toPromise().then(res => {\n        //profiles validation\n        this.userArray = res;\n        if (this.userArray.length > 0) {\n          if (this.userArray.length == 2) {\n            this.toastr.info('This email already exists with the two Profiles!', 'Messages: ');\n            return;\n          } else {\n            if (this.profileId == this.userArray[0].profile.profileId) {\n              this.toastr.info(`This email already exists with the ${this.userArray[0].profile.profileName} Profile, you must save with the other Profile`, 'Messages: ');\n              return;\n            }\n          }\n        } else {\n          //save method\n          let user = {\n            userId: \"\",\n            profile: {\n              profileId: this.profileId,\n              profileName: \"\"\n            },\n            name: this.registerForm.get('name').value,\n            lastName: this.registerForm.get('lastName').value,\n            userName: this.registerForm.get('userName').value,\n            password: this.registerForm.get('password').value,\n            email: this.registerForm.get('email').value,\n            phone: this.registerForm.get('phone').value\n          };\n          const adress = {\n            description: this.registerForm.get('adress').value,\n            principal: 'S',\n            city: 'Medellin'\n          };\n          this.userService.saveUser(user).subscribe(data => {\n            adress.user = data[\"recordId\"];\n            this.adressService.saveAdress(adress);\n          });\n          this.toastr.success(\"User Was saved successfully\", 'Messages: ');\n          //this.registerForm.reset();\n        }\n      });\n    }\n    changeProfile(e) {\n      this.profileId = e.target.value;\n    }\n    static {\n      this.ɵfac = function RegisterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RegisterComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AdressService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegisterComponent,\n        selectors: [[\"register\"]],\n        decls: 47,\n        vars: 3,\n        consts: [[1, \"container\", \"m-5\"], [1, \"form-inline\", 3, \"ngSubmit\", \"formGroup\"], [1, \"row\", \"mb-4\"], [1, \"form-group\", \"col-sm-3\", \"mr-2\"], [\"for\", \"name\"], [\"type\", \"text\", \"formControlName\", \"name\", \"alfabeticoTag\", \"\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"lastName\"], [\"type\", \"text\", \"formControlName\", \"lastName\", \"alfabeticoTag\", \"\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"phone\"], [\"type\", \"text\", \"formControlName\", \"phone\", \"appNumerosTag\", \"\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"email\"], [\"type\", \"text\", \"formControlName\", \"email\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"userName\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"password\"], [\"type\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [1, \"form-group\", \"col-sm-6\"], [\"for\", \"adress\"], [\"type\", \"adress\", \"formControlName\", \"adress\", \"required\", \"\", 1, \"form-control\"], [1, \"form-group\", \"col-sm-4\"], [\"for\", \"profile\"], [\"formControlName\", \"profile\", \"required\", \"\", 1, \"form-control\", 3, \"change\"], [\"value\", \"0\", \"disabled\", \"\", 3, \"selected\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"]],\n        template: function RegisterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Register Form\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"label\", 4);\n            i0.ɵɵtext(7, \"Name:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 3)(10, \"label\", 6);\n            i0.ɵɵtext(11, \"Last Name:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 3)(14, \"label\", 8);\n            i0.ɵɵtext(15, \"Phone:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(16, \"input\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 2)(18, \"div\", 3)(19, \"label\", 10);\n            i0.ɵɵtext(20, \"Email:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(21, \"input\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 3)(23, \"label\", 6);\n            i0.ɵɵtext(24, \"Username:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(25, \"input\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"div\", 3)(27, \"label\", 13);\n            i0.ɵɵtext(28, \"Password:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(29, \"input\", 14);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(30, \"div\", 2)(31, \"div\", 15)(32, \"label\", 16);\n            i0.ɵɵtext(33, \"Adress:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(34, \"input\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"div\", 18)(36, \"label\", 19);\n            i0.ɵɵtext(37, \"Profile:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"select\", 20);\n            i0.ɵɵlistener(\"change\", function RegisterComponent_Template_select_change_38_listener($event) {\n              return ctx.changeProfile($event);\n            });\n            i0.ɵɵelementStart(39, \"option\", 21);\n            i0.ɵɵtext(40, \"Choose one...\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"option\", 22);\n            i0.ɵɵtext(42, \"Client\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"option\", 23);\n            i0.ɵɵtext(44, \"Professional\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(45, \"button\", 24);\n            i0.ɵɵtext(46, \"Submit\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n            i0.ɵɵadvance(36);\n            i0.ɵɵproperty(\"selected\", true);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"disabled\", !ctx.registerForm.valid);\n          }\n        },\n        styles: [\"#registerForm[_ngcontent-%COMP%]{left:50%;top:50%;margin-left:-25%;position:absolute;margin-top:-25%}\"]\n      });\n    }\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}